<div class="mt-2" id="tasks">
    <div class="d-flex align-items-center flex-wrap">
        <button class="sort btn btn-secondary mb-3 mx-1" data-sort="name">
            Sort by name
        </button>
        <button class="sort btn btn-secondary mb-3 mx-1" data-sort="deadline">
            Sort by deadline
        </button>
        <button class="sort btn btn-secondary mb-3 mx-1" data-sort="status">
            Sort by status
        </button>
        <input class="search nav-item mb-3 mx-1" placeholder="Search in table"/>
    </div>
    <table class="table table-hover table-responsive">
        <thead>
        <tr>
            <th scope="col">Name</th>
            <th scope="col">Description</th>
            <th scope="col">Attributed to</th>
            {% if (app.user and
                app.user.isParticipantOn(project) and
                app.user.getParticipationOn(project).role != constant('App\\Entity\\Participant::ROLE_WAITING_VOLUNTEER')) %}
                <th scope="col">Add participant</th>
                <th scope="col">Deadline</th>
                <th scope="col">Status</th>
                <th scope="col">Edit</th>
                <th scope="col">Start</th>
                <th scope="col">Close</th>
            {% endif %}
        </tr>
        </thead>

        <tbody class="list">
        <tr>
            {% for task in tasks %}


            <th class="name">{{ task.name }}</th>
            <td class="description">{{ task.description|split(' ')[0] }} ....</td>
            <td class="user">{% for user in task.users %}<cite>{{ user.firstname }} ,</cite>{% endfor %}</td>
            {% if (app.user and
                app.user.isParticipantOn(project) and
                app.user.getParticipationOn(project).role != constant('App\\Entity\\Participant::ROLE_WAITING_VOLUNTEER')) %}
            <td class="Add participant">
                <form action="{{ path('project_task_attribute', {'idTask' : task.id}) }}" method="post">
                    <button class="btn card-link"><i class="fas fa-user-edit"></i></button>
                </form>
            </td>
            <td class="deadline">{{ task.deadline|date('Y-m-d') }}</td>
            <td class="status">{% if task.status == 0 %} <span
                        class="bg-secondary text-light mb-1">To start</span>{% elseif task.status == 1 %}<span
                        class="bg-blueish text-light mb-1">In progress</span>{% elseif task.status == 2 %}<span
                        class="bg-greenish text-light mb-1">Achieved{% endif %}</span></td>
            <td class="edit"><a class="card-link btn" href="{{ path('project_task_edit', {'idTask': task.id}) }}"><i class="fas fa-edit"></i></a>
            </td>
            <td class="attribut">{% if task.status == 0 %}

                    <form action="{{ path('status_attributTask', {'id' : task.id}) }}" method="post">
                        <button class="card-link btn"><i class="far fa-check-square"></i></button>
                    </form>
                {% endif %}</td>
            <td class="close">{% if task.status == 1 %}
                    <form action="{{ path('status_achievedTask', {'id' : task.id}) }}" method="post">
                        <button class="card-link btn"><i class="fas fa-check-square"></i></button>
                    </form>
                {% endif %}</td>
            {% endif %}

        </tr>
        {% else %}
            <h3>no tasks yet on this project</h3>
        {% endfor %}
        </tbody>

    </table>
</div>
